cmake_minimum_required(VERSION 3.5)
project(Qt_Demo)

set(CMAKE_INCLUDE_CURRENT_DIR ON)
set(CMAKE_AUTOUIC ON)
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTORCC ON)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

add_compile_options("$<$<C_COMPILER_ID:MSVC>:/utf-8>")
add_compile_options("$<$<CXX_COMPILER_ID:MSVC>:/utf-8>")

find_package(QT NAMES Qt6 Qt5 REQUIRED COMPONENTS Widgets)
find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS Widgets)

file(GLOB_RECURSE srcs ${CMAKE_CURRENT_LIST_DIR}/*.c* ${CMAKE_CURRENT_LIST_DIR}/*.h*)
file(GLOB_RECURSE qrcs ${CMAKE_CURRENT_LIST_DIR}/*.qrc)

list(APPEND CMAKE_AUTOUIC_SEARCH_PATHS ".")

set(PROJECT_SOURCES
   ${srcs}
   ${qrcs}
)
add_executable(${PROJECT_NAME} ${PROJECT_SOURCES})
target_link_libraries(${PROJECT_NAME} PRIVATE Qt${QT_VERSION_MAJOR}::Widgets);